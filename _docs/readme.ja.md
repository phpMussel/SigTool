### インストールする方法：

インストールする前に、要件を確認してください。​要件が満たされていない場合、ＳｉｇＴｏｏｌは正しく動作しません。

#### 要件：
- __ＳｉｇＴｏｏｌ &lt;=1.0.2 の場合：__ ｐｈａｒをサポートする ＰＨＰ &gt;=7.0.3 (ＰＨＰ &gt;=7.2.0 をお勧めします).
- __ＳｉｇＴｏｏｌ 1.0.3 の場合：__ ＰＨＰ &gt;=7.0.3 (ＰＨＰ &gt;=7.2.0 をお勧めします).
- __ＳｉｇＴｏｏｌ v2 の場合：__ ＰＨＰ &gt;=7.2.0.
- __すべてのバージョン：__ *少なくとも* &gt;=681 ＭＢの使用可能なＲＡＭ（ただし、少なくとも &gt;=1 ＧＢを強くお勧めします）。
- __すべてのバージョン：__ 使用可能なディスク容量は約 300 ＭＢです（この数は、シグネチャ・データベースの反復ごとに異なる場合があります）。
- __すべてのバージョン：__ ＰＨＰを、ＣＬＩモードで操作する機能（例えば、コマンド・プロンプト、ターミナル、シェル、ｂａｓｈ、など）。

SigToolをインストールするための推奨される方法は、Composerを使用することです。

`composer require phpmussel/sigtool`

お望みならば、リポジトリのクローンを作成するか、GitHubから直接ＺＩＰをダウンロードすることもできます。

---


### 使い方：

注意：ＳｉｇＴｏｏｌは、「ウェブ・アプリ」ではありません！​端末、シェル、などで使用することを目的とした、ＳｉｇＴｏｏｌは「ＣＬＩアプリ」です！​これは、最初の引数として`SigTool.php`ファイルを指定してＰＨＰバイナリを呼び出すことで起動できます。

`$ php SigTool.php`

ＳｉｇＴｏｏｌが呼び出されると、ヘルプ情報が表示されます。​ＳｉｇＴｏｏｌを使用するための可能なオプションがリストされます。

可能なオプション：
- オプションを指定しないと、このヘルプ情報が表示されます。
- `x`：`daily.cvd`と`main.cvd`からシグネチャ・ファイルを抽出します。
- `p`：ｐｈｐＭｕｓｓｅｌで使用するためのシグネチャ・ファイルを処理します。
- `m`：処理の前に`main.cvd`をダウンロードします。
- `d`：処理の前に`daily.cvd`をダウンロードします。
- `u`：ＳｉｇＴｏｏｌをアップデイトします（再度`SigTool.php`をダウンロードして終了します。チェックは実行されません）。

生成される出力は、ＣｌａｍＡＶシグネチャ・データベースから直接生成されたｐｈｐＭｕｓｓｅｌシグネチャ・ファイルです。​２つの形式があります：
- `/vault/signatures/`ディレクトリに直接挿入できるシグネチャ・ファイル。
- `phpMussel/Signatures`リポジトリのアップデイトに使用できるシグネチャ・ファイルのＧＺ圧縮コピー。

出力は`SigTool.php`と同じディレクトリに直接生成されます。​ソース・ファイルとすべての一時作業ファイルは操作中に削除されます（そのため、`daily.cvd`と`main.cvd`のコピーを保存したい場合は、シグネチャ・ファイルを処理する前に、コピーを作成する必要があります）。

ＳｉｇＴｏｏｌを使って新しいシグネチャ・ファイルを生成するとき、あなたのコンピュータ・アンチウイルス・スキャナが新しく生成されたシグネチャ・ファイルを削除または隔離しようと試みるかもしれません。​これは、シグネチャ・ファイルに含まれるデータは、アンチウイルス・スキャン中に、悪意あるように見えるで発生します（ＳｉｇＴｏｏｌによって生成されたシグネチャ・ファイルは実行可能なコードを一切含んでおらず、完全に無害です）。​この問題が発生した場合は、ウイルス対策スキャナを一時的に無効にする、新しいシグネチャ・ファイルのディレクトリをホワイトリストに登録するようにアンチウイルス・スキャナを設定します。

処理時に`signatures.dat` ＹＡＭＬファイルが同じディレクトリに含まれている場合は、バージョン情報とチェックサムはそれに応じて更新されます（そのため、ＳｉｇＴｏｏｌを使用して`phpMussel/Signatures`リポジトリを更新するときには、これを含める必要があります）。

*注意：あなたがｐｈｐＭｕｓｓｅｌユーザーなら、シグネチャ・ファイルが正しく機能するためには、「アクティブ」である必要があります思い出してください！​ＳｉｇＴｏｏｌを使って新しいシグネチャ・ファイルを生成している場合、ｐｈｐＭｕｓｓｅｌで「Active」コンフィギュレーション・ディレクティブにそれらをリストすることでそれらを「アクティブにする」ことができます。​フロントエンドのアップデート・ページから直接「有効にする」こともできます。​ただし、両方の方法を使用する必要はありません。​最適なパフォーマンスを得るために、必要以上のシグネチャ・ファイルを使用しないことをお勧めします（例えば、ファイル・タイプがブラックリストに載っている場合は、おそらくそのファイル・タイプに対応するシグネチャ・ファイルは必要ないでしょう。すでにブロックされているファイルを分析することは余計な作業であり、スキャン・プロセスを大幅に遅くする可能性があります）。*

ＳｉｇＴｏｏｌを使用するためのビデオ・デモンストレーションがＹｏｕＴｕｂｅで利用可能です： __[youtu.be/f2LfjY1HzRI](https://youtu.be/f2LfjY1HzRI)__

---


### ＳｉｇＴｏｏｌによって生成されたシグネチャ・ファイルのリスト：
シグネチャ・ファイル | 説明
---|---
clamav.hdb | あらゆる種類のファイルで動作します。​ファイルハッシュで動作します。
clamav.htdb | ＨＴＭＬファイルを操作します。​ＨＴＭＬ正規化データで動作します。
clamav_regex.htdb | ＨＴＭＬファイルを操作します。​ＨＴＭＬ正規化データで動作します。​シグネチャには正規表現を含めることができます。
clamav.mdb | ＰＥファイルを操作します。​ＰＥ断面メタデータで動作します。
clamav.ndb | あらゆる種類のファイルで動作します。​ＡＮＳＩ正規化データで動作します。
clamav_regex.ndb | あらゆる種類のファイルで動作します。​ＡＮＳＩ正規化データで動作します。​シグネチャには正規表現を含めることができます。
clamav.db | あらゆる種類のファイルで動作します。​生データで動作します。
clamav_regex.db | あらゆる種類のファイルで動作します。​生データで動作します。​シグネチャには正規表現を含めることができます。
clamav_elf.db | ＥＬＦファイルを操作します。​生データで動作します。
clamav_elf_regex.db | ＥＬＦファイルを操作します。​生データで動作します。​シグネチャには正規表現を含めることができます。
clamav_email.db | ＥＭＬファイルを操作します。​生データで動作します。
clamav_email_regex.db | ＥＭＬファイルを操作します。​生データで動作します。​シグネチャには正規表現を含めることができます。
clamav_exe.db | ＰＥファイルを操作します。​生データで動作します。
clamav_exe_regex.db | ＰＥファイルを操作します。​生データで動作します。​シグネチャには正規表現を含めることができます。
clamav_graphics.db | 画像ファイルを操作します。​生データで動作します。
clamav_graphics_regex.db | 画像ファイルを操作します。​生データで動作します。​シグネチャには正規表現を含めることができます。
clamav_java.db | Ｊａｖａファイルを操作します。​生データで動作します。
clamav_java_regex.db | Ｊａｖａファイルを操作します。​生データで動作します。​シグネチャには正規表現を含めることができます。
clamav_macho.db | Ｍａｃｈ-Ｏファイルを操作します。​生データで動作します。
clamav_macho_regex.db | Ｍａｃｈ-Ｏファイルを操作します。​生データで動作します。​シグネチャには正規表現を含めることができます。
clamav_ole.db | ＯＬＥオブジェクトを操作します。​生データで動作します。
clamav_ole_regex.db | ＯＬＥオブジェクトを操作します。​生データで動作します。​シグネチャには正規表現を含めることができます。
clamav_pdf.db | ＰＤＦファイルを操作します。​生データで動作します。
clamav_pdf_regex.db | ＰＤＦファイルを操作します。​生データで動作します。​シグネチャには正規表現を含めることができます。
clamav_swf.db | ＳＷＦファイルを操作します。​生データで動作します。
clamav_swf_regex.db | ＳＷＦファイルを操作します。​生データで動作します。​シグネチャには正規表現を含めることができます。

---


### シグネチャ・ファイルの拡張子に関する注意：
*この情報は将来拡張されます。*

- __cedb__: 複雑な拡張シグネチャ・ファイル。​これはｐｈｐＭｕｓｓｅｌ用に作成された自作形式で、ＣｌａｍＡＶシグネチャ・データベースとは関係ありません。​ＳｉｇＴｏｏｌはこの拡張子を使ってシグネチャ・ファイルを生成しません。​これらは、`phpMussel/Signatures`リポジトリ用に手動で書かれています。​`clamav.cedb`は、ｐｈｐＭｕｓｓｅｌにはまだ有用であると考えられているいくつかの時代遅れＣｌａｍＡＶシグネチャの適応を含んでいます。​ｐｈｐＭｕｓｓｅｌによって生成された拡張メタデータに基づくルールを扱うシグネチャ・ファイルはこの拡張子を使います。
- __db__: 標準シグネチャ・ファイル。​これらは、`daily.cvd`と`main.cvd`に含まれる`.ndb`シグネチャ・ファイルから抽出されます。​ファイル・コンテンツを直接操作するシグネチャ・ファイルは、この拡張子を使用します。
- __fdb__: ファイル名シグネチャ・ファイル。​ＣｌａｍＡＶシグネチャ・データベースは、以前はファイル名シグネチャをサポートしていましたが、もう使用できません。​ＳｉｇＴｏｏｌはこの拡張子を使ってシグネチャ・ファイルを生成しません。​ｐｈｐＭｕｓｓｅｌの継続的な有用性のために維持されます。​ファイル名で動作するシグネチャ・ファイルはこの拡張子を使います。
- __hdb__: ハッシュ・シグネチャ・ファイル。​これらは、`daily.cvd`と`main.cvd`に含まれる`.hdb`シグネチャ・ファイルから抽出されます。​ファイル・ハッシュで動作するシグネチャ・ファイルはこの拡張子を使用します。
- __htdb__: ＨＴＭＬシグネチャ・ファイル。​これらは、`daily.cvd`と`main.cvd`に含まれる`.ndb`シグネチャ・ファイルから抽出されます。​ＨＴＭＬ正規化コンテンツで動作するシグネチャ・ファイルはこの拡張子を使用します。
- __mdb__: ＰＥ断面シグネチャ・ファイル。​これらは、`daily.cvd`と`main.cvd`に含まれる`.mdb`シグネチャ・ファイルから抽出されます。​ＰＥ断面メタデータで動作するシグネチャ・ファイルはこの拡張子を使用します。
- __medb__: ＰＥ拡張シグネチャ・ファイル。​これはｐｈｐＭｕｓｓｅｌ用に作成された自作形式で、ＣｌａｍＡＶシグネチャ・データベースとは関係ありません。​ＳｉｇＴｏｏｌはこの拡張子を使ってシグネチャ・ファイルを生成しません。​これらは、`phpMussel/Signatures`リポジトリ用に手動で書かれています。​ＰＥメタデータ（ＰＥ断面メタデータ以外）で動作するシグネチャ・ファイルはこの拡張子を使用します。
- __ndb__: 正規化されたシグネチャ・ファイル。​これらは、`daily.cvd`と`main.cvd`に含まれる`.ndb`シグネチャ・ファイルから抽出されます。​ＡＮＳＩ正規化コンテンツで動作するシグネチャ・ファイルはこの拡張子を使用します。
- __udb__: ＵＲＬシグネチャ・ファイル。​これはｐｈｐＭｕｓｓｅｌ用に作成された自作形式で、ＣｌａｍＡＶシグネチャ・データベースとは関係ありません。​ＳｉｇＴｏｏｌは、現在この拡張子を使ってシグネチャ・ファイルを生成していませんが、将来変更される可能性があります。​現在、これらは、`phpMussel/Signatures`リポジトリ用に手動で書かれています。​ＵＲＬで動作するシグネチャ・ファイルはこの拡張子を使います。
- __ldb__: 論理シグネチャ・ファイル。​将来に、これらは`daily.cvd`と`main.cvd`に含まれる`.ldb`シグネチャ・ファイルから抽出されるでしょう。​しかし、ＳｉｇＴｏｏｌやｐｈｐＭｕｓｓｅｌではまだサポートされていません。​さまざまな論理規則で動作するシグネチャ・ファイルはこの拡張子を使用します。


---


最終アップデート：２０２１年７月２２日。
